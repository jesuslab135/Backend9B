# Generated by Django 5.2.6 on 2025-10-31 04:31

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='VwDailySummary',
            fields=[
                ('consumidor_id', models.IntegerField(primary_key=True, serialize=False)),
                ('fecha', models.DateField()),
                ('cigarrillos_hoy', models.IntegerField()),
                ('cigarrillos_semana', models.IntegerField()),
                ('cigarrillos_mes', models.IntegerField()),
                ('hr_promedio_hoy', models.DecimalField(decimal_places=2, max_digits=10, null=True)),
                ('deseos_hoy', models.IntegerField()),
                ('deseos_resueltos_hoy', models.IntegerField()),
                ('deseos_activos', models.IntegerField()),
                ('predicciones_hoy', models.IntegerField()),
                ('total_predicciones_correctas', models.IntegerField()),
            ],
            options={
                'verbose_name': 'Daily Summary',
                'verbose_name_plural': 'Daily Summary',
                'db_table': 'vw_daily_summary',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VwDesiresStats',
            fields=[
                ('consumidor_id', models.IntegerField()),
                ('deseo_tipo', models.CharField(max_length=50, primary_key=True, serialize=False)),
                ('total_deseos', models.IntegerField()),
                ('deseos_resueltos', models.IntegerField()),
                ('deseos_activos', models.IntegerField()),
                ('porcentaje_resolucion', models.DecimalField(decimal_places=2, max_digits=5)),
                ('promedio_horas_resolucion', models.DecimalField(decimal_places=2, max_digits=10, null=True)),
                ('deseos_hoy', models.IntegerField()),
                ('deseos_resueltos_hoy', models.IntegerField()),
            ],
            options={
                'verbose_name': 'Desires Statistics',
                'verbose_name_plural': 'Desires Statistics',
                'db_table': 'vw_desires_stats',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VwDesiresTracking',
            fields=[
                ('deseo_id', models.IntegerField(primary_key=True, serialize=False)),
                ('consumidor_id', models.IntegerField()),
                ('deseo_tipo', models.CharField(max_length=50)),
                ('resolved', models.BooleanField()),
                ('fecha_creacion', models.DateTimeField()),
                ('ventana_inicio', models.DateTimeField(null=True)),
                ('heart_rate_durante', models.FloatField(null=True)),
                ('urge_label', models.IntegerField(null=True)),
                ('probabilidad_modelo', models.FloatField(null=True)),
                ('horas_hasta_resolucion', models.FloatField(null=True)),
            ],
            options={
                'verbose_name': 'Desires Tracking',
                'verbose_name_plural': 'Desires Tracking',
                'db_table': 'vw_desires_tracking',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VwHabitStats',
            fields=[
                ('consumidor_id', models.IntegerField(primary_key=True, serialize=False)),
                ('habito_nombre', models.CharField(max_length=50)),
                ('total_eventos', models.IntegerField()),
                ('primer_registro', models.DateTimeField()),
                ('ultimo_registro', models.DateTimeField()),
                ('promedio_diario', models.DecimalField(decimal_places=2, max_digits=10)),
                ('eventos_mes_actual', models.IntegerField()),
                ('eventos_mes_anterior', models.IntegerField()),
            ],
            options={
                'verbose_name': 'Habit Statistics',
                'verbose_name_plural': 'Habit Statistics',
                'db_table': 'vw_habit_stats',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VwHabitTracking',
            fields=[
                ('consumidor_id', models.IntegerField(primary_key=True, serialize=False)),
                ('habito_nombre', models.CharField(max_length=50)),
                ('fecha', models.DateField()),
                ('total_cigarrillos', models.IntegerField()),
                ('cigarrillos_hoy', models.IntegerField()),
                ('cigarrillos_semana', models.IntegerField()),
                ('cigarrillos_mes', models.IntegerField()),
            ],
            options={
                'verbose_name': 'Habit Tracking',
                'verbose_name_plural': 'Habit Tracking',
                'db_table': 'vw_habit_tracking',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VwHeartRateStats',
            fields=[
                ('consumidor_id', models.IntegerField(primary_key=True, serialize=False)),
                ('total_mediciones', models.IntegerField()),
                ('hr_promedio_general', models.DecimalField(decimal_places=2, max_digits=10)),
                ('hr_minimo', models.DecimalField(decimal_places=2, max_digits=10)),
                ('hr_maximo', models.DecimalField(decimal_places=2, max_digits=10)),
                ('hr_desviacion', models.DecimalField(decimal_places=2, max_digits=10)),
                ('hr_promedio_hoy', models.DecimalField(decimal_places=2, max_digits=10, null=True)),
                ('hr_promedio_semana', models.DecimalField(decimal_places=2, max_digits=10, null=True)),
            ],
            options={
                'verbose_name': 'Heart Rate Statistics',
                'verbose_name_plural': 'Heart Rate Statistics',
                'db_table': 'vw_heart_rate_stats',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VwHeartRateTimeline',
            fields=[
                ('id', models.IntegerField(primary_key=True, serialize=False)),
                ('consumidor_id', models.IntegerField()),
                ('window_start', models.DateTimeField()),
                ('window_end', models.DateTimeField()),
                ('heart_rate_mean', models.FloatField()),
                ('heart_rate_std', models.FloatField()),
                ('heart_rate_min_estimate', models.DecimalField(decimal_places=2, max_digits=10)),
                ('heart_rate_max_estimate', models.DecimalField(decimal_places=2, max_digits=10)),
                ('fecha', models.DateField()),
                ('hora', models.IntegerField()),
            ],
            options={
                'verbose_name': 'Heart Rate Timeline',
                'verbose_name_plural': 'Heart Rate Timeline',
                'db_table': 'vw_heart_rate_timeline',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VwPredictionSummary',
            fields=[
                ('consumidor_id', models.IntegerField(primary_key=True, serialize=False)),
                ('total_predicciones', models.IntegerField()),
                ('predicciones_urge', models.IntegerField()),
                ('predicciones_no_urge', models.IntegerField()),
                ('porcentaje_urge', models.DecimalField(decimal_places=2, max_digits=5)),
                ('predicciones_hoy', models.IntegerField()),
                ('predicciones_semana', models.IntegerField()),
            ],
            options={
                'verbose_name': 'Prediction Summary',
                'verbose_name_plural': 'Prediction Summary',
                'db_table': 'vw_prediction_summary',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VwPredictionTimeline',
            fields=[
                ('analisis_id', models.IntegerField(primary_key=True, serialize=False)),
                ('consumidor_id', models.IntegerField()),
                ('window_start', models.DateTimeField()),
                ('window_end', models.DateTimeField()),
                ('modelo_usado', models.CharField(max_length=100)),
                ('urge_label', models.IntegerField()),
                ('probabilidad_modelo', models.FloatField()),
                ('accuracy', models.FloatField()),
                ('fecha', models.DateField()),
                ('hora', models.IntegerField()),
            ],
            options={
                'verbose_name': 'Prediction Timeline',
                'verbose_name_plural': 'Prediction Timeline',
                'db_table': 'vw_prediction_timeline',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VwWeeklyComparison',
            fields=[
                ('consumidor_id', models.IntegerField(primary_key=True, serialize=False)),
                ('cigarrillos_semana_actual', models.IntegerField()),
                ('cigarrillos_semana_anterior', models.IntegerField()),
                ('porcentaje_cambio', models.DecimalField(decimal_places=2, max_digits=5, null=True)),
                ('deseos_semana_actual', models.IntegerField()),
                ('deseos_semana_anterior', models.IntegerField()),
            ],
            options={
                'verbose_name': 'Weekly Comparison',
                'verbose_name_plural': 'Weekly Comparison',
                'db_table': 'vw_weekly_comparison',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Emocion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('nombre', models.CharField(help_text='Unique name identifier', max_length=50, unique=True)),
                ('descripcion', models.TextField(blank=True, help_text='Optional description', null=True)),
            ],
            options={
                'verbose_name': 'Emoción',
                'verbose_name_plural': 'Emociones',
                'db_table': 'emociones',
            },
        ),
        migrations.CreateModel(
            name='Habito',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('nombre', models.CharField(help_text='Unique name identifier', max_length=50, unique=True)),
                ('descripcion', models.TextField(blank=True, help_text='Optional description', null=True)),
            ],
            options={
                'verbose_name': 'Hábito',
                'verbose_name_plural': 'Hábitos',
                'db_table': 'habitos',
            },
        ),
        migrations.CreateModel(
            name='Motivo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('nombre', models.CharField(help_text='Unique name identifier', max_length=50, unique=True)),
                ('descripcion', models.TextField(blank=True, help_text='Optional description', null=True)),
            ],
            options={
                'verbose_name': 'Motivo',
                'verbose_name_plural': 'Motivos',
                'db_table': 'motivos',
            },
        ),
        migrations.CreateModel(
            name='Permiso',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('lectura', models.BooleanField(default=True, help_text='Permission to read/view')),
                ('creacion', models.BooleanField(default=False, help_text='Permission to create')),
                ('edicion', models.BooleanField(default=False, help_text='Permission to edit')),
                ('eliminacion', models.BooleanField(default=False, help_text='Permission to delete')),
            ],
            options={
                'verbose_name': 'Permiso',
                'verbose_name_plural': 'Permisos',
                'db_table': 'permisos',
            },
        ),
        migrations.CreateModel(
            name='Solucion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('nombre', models.CharField(help_text='Unique name identifier', max_length=50, unique=True)),
                ('descripcion', models.TextField(blank=True, help_text='Optional description', null=True)),
            ],
            options={
                'verbose_name': 'Solución',
                'verbose_name_plural': 'Soluciones',
                'db_table': 'soluciones',
            },
        ),
        migrations.CreateModel(
            name='Usuario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('nombre', models.CharField(help_text='Full name of the user', max_length=100)),
                ('telefono', models.CharField(blank=True, help_text='Phone number (optional)', max_length=20, null=True)),
                ('email', models.EmailField(help_text='Email address (used for login)', max_length=120, unique=True)),
                ('password_hash', models.TextField(help_text='Hashed password (never store plain text)')),
                ('rol', models.CharField(choices=[('consumidor', 'Consumidor'), ('administrador', 'Administrador')], default='consumidor', help_text='User role (consumidor or administrador)', max_length=50)),
            ],
            options={
                'verbose_name': 'Usuario',
                'verbose_name_plural': 'Usuarios',
                'db_table': 'usuarios',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['email'], name='usuarios_email_0ff7b3_idx'), models.Index(fields=['rol'], name='usuarios_rol_936bfb_idx')],
            },
        ),
        migrations.CreateModel(
            name='Consumidor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('edad', models.IntegerField(blank=True, help_text='Age in years', null=True)),
                ('peso', models.FloatField(blank=True, help_text='Weight in kilograms', null=True)),
                ('altura', models.FloatField(blank=True, help_text='Height in centimeters', null=True)),
                ('bmi', models.FloatField(blank=True, editable=False, help_text='Body Mass Index (calculated by database)', null=True)),
                ('genero', models.CharField(choices=[('masculino', 'Masculino'), ('femenino', 'Femenino')], help_text='Gender', max_length=30)),
                ('usuario', models.OneToOneField(help_text='Reference to base Usuario', on_delete=django.db.models.deletion.CASCADE, related_name='consumidor', to='api.usuario')),
            ],
            options={
                'verbose_name': 'Consumidor',
                'verbose_name_plural': 'Consumidores',
                'db_table': 'consumidores',
            },
        ),
        migrations.CreateModel(
            name='Administrador',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('area_responsable', models.CharField(blank=True, help_text="Responsible area (e.g., 'IT', 'Health Services')", max_length=100, null=True)),
                ('usuario', models.OneToOneField(help_text='Reference to base Usuario', on_delete=django.db.models.deletion.CASCADE, related_name='administrador', to='api.usuario')),
            ],
            options={
                'verbose_name': 'Administrador',
                'verbose_name_plural': 'Administradores',
                'db_table': 'administradores',
            },
        ),
        migrations.CreateModel(
            name='Ventana',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('window_start', models.DateTimeField(help_text='Start timestamp of the time window')),
                ('window_end', models.DateTimeField(help_text='End timestamp of the time window')),
                ('hr_mean', models.FloatField(blank=True, help_text='Mean heart rate in the window (BPM)', null=True)),
                ('hr_std', models.FloatField(blank=True, help_text='Standard deviation of heart rate', null=True)),
                ('gyro_energy', models.FloatField(blank=True, help_text='Gyroscope energy (motion intensity)', null=True)),
                ('accel_energy', models.FloatField(blank=True, help_text='Accelerometer energy (movement intensity)', null=True)),
                ('emotion_embedding', models.JSONField(blank=True, help_text='Vector embedding of emotions (for ML)', null=True)),
                ('motive_embedding', models.JSONField(blank=True, help_text='Vector embedding of motives (for ML)', null=True)),
                ('solution_embedding', models.JSONField(blank=True, help_text='Vector embedding of solutions (for ML)', null=True)),
                ('consumidor', models.ForeignKey(help_text='Consumer this window belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='ventanas', to='api.consumidor')),
            ],
            options={
                'verbose_name': 'Ventana',
                'verbose_name_plural': 'Ventanas',
                'db_table': 'ventanas',
                'ordering': ['-window_start'],
            },
        ),
        migrations.CreateModel(
            name='Lectura',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('heart_rate', models.FloatField(blank=True, help_text='Heart rate in beats per minute (BPM)', null=True)),
                ('accel_x', models.FloatField(blank=True, help_text='Accelerometer X-axis value', null=True)),
                ('accel_y', models.FloatField(blank=True, help_text='Accelerometer Y-axis value', null=True)),
                ('accel_z', models.FloatField(blank=True, help_text='Accelerometer Z-axis value', null=True)),
                ('gyro_x', models.FloatField(blank=True, help_text='Gyroscope X-axis value', null=True)),
                ('gyro_y', models.FloatField(blank=True, help_text='Gyroscope Y-axis value', null=True)),
                ('gyro_z', models.FloatField(blank=True, help_text='Gyroscope Z-axis value', null=True)),
                ('ventana', models.ForeignKey(help_text='Time window this reading belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='lecturas', to='api.ventana')),
            ],
            options={
                'verbose_name': 'Lectura',
                'verbose_name_plural': 'Lecturas',
                'db_table': 'lecturas',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Deseo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('tipo', models.CharField(choices=[('comida', 'Comida'), ('bebida', 'Bebida'), ('compra', 'Compra'), ('sustancia', 'Sustancia'), ('otro', 'Otro')], help_text='Type of desire/urge', max_length=50)),
                ('resolved', models.BooleanField(default=False, help_text='Whether the desire was resolved/overcome')),
                ('consumidor', models.ForeignKey(help_text='Consumer experiencing the desire', on_delete=django.db.models.deletion.CASCADE, related_name='deseos', to='api.consumidor')),
                ('ventana', models.ForeignKey(blank=True, help_text='Associated time window (optional)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deseos', to='api.ventana')),
            ],
            options={
                'verbose_name': 'Deseo',
                'verbose_name_plural': 'Deseos',
                'db_table': 'deseos',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Analisis',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('modelo_usado', models.CharField(blank=True, help_text='Name/version of ML model used', max_length=100, null=True)),
                ('probabilidad_modelo', models.FloatField(blank=True, help_text='Model prediction probability (0-1)', null=True)),
                ('urge_label', models.IntegerField(blank=True, help_text='Binary label: 1=urge detected, 0=no urge', null=True)),
                ('recall', models.FloatField(blank=True, help_text='Model recall metric (0-1)', null=True)),
                ('f1_score', models.FloatField(blank=True, help_text='Model F1 score (0-1)', null=True)),
                ('accuracy', models.FloatField(blank=True, help_text='Model accuracy (0-1)', null=True)),
                ('roc_auc', models.FloatField(blank=True, help_text='ROC AUC score (0-1)', null=True)),
                ('comentario_modelo', models.TextField(blank=True, help_text='Optional notes about the prediction', null=True)),
                ('feature_importance', models.JSONField(blank=True, help_text='Feature importance scores (JSONB)', null=True)),
                ('ventana', models.ForeignKey(help_text='Time window this analysis is based on', on_delete=django.db.models.deletion.CASCADE, related_name='analisis', to='api.ventana')),
            ],
            options={
                'verbose_name': 'Análisis',
                'verbose_name_plural': 'Análisis',
                'db_table': 'analisis',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='FormularioTemporal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('emociones', models.JSONField(blank=True, help_text='Array of emotion data (JSONB)', null=True)),
                ('consumidor', models.ForeignKey(help_text='Consumer who submitted the temporary form', on_delete=django.db.models.deletion.CASCADE, related_name='formularios_temporales', to='api.consumidor')),
            ],
            options={
                'verbose_name': 'Formulario Temporal',
                'verbose_name_plural': 'Formularios Temporales',
                'db_table': 'formularios_temporales',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['consumidor', 'created_at'], name='formularios_consumi_2dc619_idx')],
            },
        ),
        migrations.CreateModel(
            name='Formulario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('fecha_envio', models.DateTimeField(auto_now_add=True, help_text='Timestamp when form was submitted')),
                ('emociones', models.JSONField(blank=True, help_text='Array of emotion data (JSONB)', null=True)),
                ('motivos', models.JSONField(blank=True, help_text='Array of motive data (JSONB)', null=True)),
                ('soluciones', models.JSONField(blank=True, help_text='Array of solution data (JSONB)', null=True)),
                ('consumidor', models.ForeignKey(help_text='Consumer who submitted the form', on_delete=django.db.models.deletion.CASCADE, related_name='formularios', to='api.consumidor')),
                ('habito', models.ForeignKey(blank=True, help_text='Related habit (e.g., smoking)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='formularios', to='api.habito')),
            ],
            options={
                'verbose_name': 'Formulario',
                'verbose_name_plural': 'Formularios',
                'db_table': 'formularios',
                'ordering': ['-fecha_envio'],
                'indexes': [models.Index(fields=['consumidor', 'fecha_envio'], name='formularios_consumi_bf441a_idx'), models.Index(fields=['habito'], name='formularios_habito__6a6423_idx'), models.Index(fields=['fecha_envio'], name='formularios_fecha_e_6d3787_idx')],
            },
        ),
        migrations.CreateModel(
            name='Notificacion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('tipo', models.CharField(choices=[('recomendacion', 'Recomendación'), ('alerta', 'Alerta'), ('recordatorio', 'Recordatorio'), ('logro', 'Logro')], help_text='Type of notification', max_length=50)),
                ('contenido', models.TextField(help_text='Notification content/message')),
                ('fecha_envio', models.DateTimeField(auto_now_add=True, help_text='Timestamp when notification was sent')),
                ('leida', models.BooleanField(default=False, help_text='Whether notification has been read')),
                ('consumidor', models.ForeignKey(help_text='Consumer receiving the notification', on_delete=django.db.models.deletion.CASCADE, related_name='notificaciones', to='api.consumidor')),
                ('deseo', models.ForeignKey(blank=True, help_text='Related desire (optional)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='notificaciones', to='api.deseo')),
            ],
            options={
                'verbose_name': 'Notificación',
                'verbose_name_plural': 'Notificaciones',
                'db_table': 'notificaciones',
                'ordering': ['-fecha_envio'],
                'indexes': [models.Index(fields=['consumidor', 'fecha_envio'], name='notificacio_consumi_96af17_idx'), models.Index(fields=['consumidor', 'leida'], name='notificacio_consumi_9a3b35_idx'), models.Index(fields=['deseo'], name='notificacio_deseo_i_1c9158_idx'), models.Index(fields=['fecha_envio'], name='notificacio_fecha_e_401fb7_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='consumidor',
            index=models.Index(fields=['usuario'], name='consumidore_usuario_e4b663_idx'),
        ),
        migrations.AddIndex(
            model_name='administrador',
            index=models.Index(fields=['usuario'], name='administrad_usuario_fce44a_idx'),
        ),
        migrations.AddIndex(
            model_name='ventana',
            index=models.Index(fields=['consumidor', 'window_start'], name='ventanas_consumi_330af5_idx'),
        ),
        migrations.AddIndex(
            model_name='ventana',
            index=models.Index(fields=['window_start'], name='ventanas_window__e9ed19_idx'),
        ),
        migrations.AddIndex(
            model_name='ventana',
            index=models.Index(fields=['window_end'], name='ventanas_window__513500_idx'),
        ),
        migrations.AddConstraint(
            model_name='ventana',
            constraint=models.CheckConstraint(condition=models.Q(('window_end__gt', models.F('window_start'))), name='check_window_order'),
        ),
        migrations.AddIndex(
            model_name='lectura',
            index=models.Index(fields=['ventana', 'created_at'], name='lecturas_ventana_8c610b_idx'),
        ),
        migrations.AddIndex(
            model_name='deseo',
            index=models.Index(fields=['consumidor', 'created_at'], name='deseos_consumi_29dd6d_idx'),
        ),
        migrations.AddIndex(
            model_name='deseo',
            index=models.Index(fields=['consumidor', 'resolved'], name='deseos_consumi_fb7e62_idx'),
        ),
        migrations.AddIndex(
            model_name='deseo',
            index=models.Index(fields=['ventana'], name='deseos_ventana_c15b08_idx'),
        ),
        migrations.AddIndex(
            model_name='analisis',
            index=models.Index(fields=['ventana'], name='analisis_ventana_0018e2_idx'),
        ),
        migrations.AddIndex(
            model_name='analisis',
            index=models.Index(fields=['probabilidad_modelo'], name='analisis_probabi_879b8f_idx'),
        ),
        migrations.AddConstraint(
            model_name='analisis',
            constraint=models.CheckConstraint(condition=models.Q(('urge_label__in', [0, 1])), name='check_urge_label'),
        ),
        migrations.AddConstraint(
            model_name='analisis',
            constraint=models.CheckConstraint(condition=models.Q(('probabilidad_modelo__gte', 0), ('probabilidad_modelo__lte', 1)), name='check_probabilidad_range'),
        ),
    ]
